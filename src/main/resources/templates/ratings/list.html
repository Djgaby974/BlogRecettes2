<!DOCTYPE html>
<html th:replace="~{layout/main :: html(content=~{::content})}">
<div th:fragment="content">
    <h1 class="mb-4"><i class="fas fa-star"></i> Dernières évaluations</h1>
    
    <div th:if="${!ratingsPage.empty}">
        <div class="list-group">
            <div th:each="rating : ${ratingsPage}" class="list-group-item">
                <div class="d-flex w-100 justify-content-between">
                    <h5 class="mb-1">
                        <a th:href="@{/recipes/{id}(id=${rating.recipe.id})}" th:text="${rating.recipe.title}"></a>
                    </h5>
                    <div class="text-warning">
                        <span th:each="i : ${#numbers.sequence(1, 5)}">
                            <i th:if="${i <= rating.value}" class="fas fa-star"></i>
                            <i th:unless="${i <= rating.value}" class="far fa-star"></i>
                        </span>
                    </div>
                </div>
                <p class="mb-1">
                    Par <a th:href="@{/profile/} + ${rating.user.username}" th:text="${rating.user.username}"></a>
                    <small class="text-muted" th:text="${#temporals.format(rating.createdAt, 'dd/MM/yyyy HH:mm')}"></small>
                </p>
            </div>
        </div>

        <nav aria-label="Pagination" class="mt-4">
            <ul class="pagination justify-content-center">
                <li class="page-item" th:classappend="${ratingsPage.first} ? 'disabled'">
                    <a th:href="@{/ratings(page=${ratingsPage.number-1})}" class="page-link" th:unless="${ratingsPage.first}">Précédent</a>
                    <span class="page-link" th:if="${ratingsPage.first}">Précédent</span>
                </li>
                <li class="page-item" th:each="i : ${#numbers.sequence(0, ratingsPage.totalPages-1)}" th:classappend="${i == ratingsPage.number} ? 'active'">
                    <a th:href="@{/ratings(page=${i})}" class="page-link" th:text="${i+1}"></a>
                </li>
                <li class="page-item" th:classappend="${ratingsPage.last} ? 'disabled'">
                    <a th:href="@{/ratings(page=${ratingsPage.number+1})}" class="page-link" th:unless="${ratingsPage.last}">Suivant</a>
                    <span class="page-link" th:if="${ratingsPage.last}">Suivant</span>
                </li>
            </ul>
        </nav>
    </div>
    
    <div th:if="${ratingsPage.empty}" class="alert alert-info">
        Aucune évaluation pour le moment.
    </div>
</div>
</html>
