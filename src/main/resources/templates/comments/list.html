<div th:fragment="content">
    <h1 class="mb-4"><i class="fas fa-comments"></i> Derniers commentaires</h1>
    
    <div th:if="${!commentsPage.empty}" class="mt-4">
        <div class="list-group">
            <div th:each="comment : ${commentsPage}" class="list-group-item">
                <div class="d-flex w-100 justify-content-between">
                    <h5 class="mb-1">
                        <a th:href="@{/recipes/{id}(id=${comment.recipe.id})}" th:text="${comment.recipe.title}"></a>
                    </h5>
                    <small class="text-muted" th:text="${#temporals.format(comment.createdAt, 'dd/MM/yyyy HH:mm')}"></small>
                </div>
                <p class="mb-1" th:text="${comment.content}"></p>
                <small>
                    Par <a th:href="@{/profile/} + ${comment.user.username}" th:text="${comment.user.username}"></a>
                </small>
            </div>
        </div>

        <nav aria-label="Pagination" class="mt-4">
            <ul class="pagination justify-content-center">
                <li class="page-item" th:classappend="${commentsPage.first} ? 'disabled'">
                    <a th:href="@{/comments(page=${commentsPage.number-1})}" class="page-link" th:unless="${commentsPage.first}">Précédent</a>
                    <span class="page-link" th:if="${commentsPage.first}">Précédent</span>
                </li>
                <li class="page-item" th:each="i : ${#numbers.sequence(0, commentsPage.totalPages-1)}" th:classappend="${i == commentsPage.number} ? 'active'">
                    <a th:href="@{/comments(page=${i})}" class="page-link" th:text="${i+1}"></a>
                </li>
                <li class="page-item" th:classappend="${commentsPage.last} ? 'disabled'">
                    <a th:href="@{/comments(page=${commentsPage.number+1})}" class="page-link" th:unless="${commentsPage.last}">Suivant</a>
                    <span class="page-link" th:if="${commentsPage.last}">Suivant</span>
                </li>
            </ul>
        </nav>
    </div>
    
    <div th:if="${commentsPage.empty}" class="alert alert-info">
        Aucun commentaire pour le moment.
    </div>
</div>
